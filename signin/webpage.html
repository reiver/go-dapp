<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>web3 signin</title>
</head>
<body>

<pre id="out">
</pre>

<script type="text/javascript">
<!--


function println(s) {
	const out = document.getElementById("out")

	out.innerText += s+"\n"
}

println("Hello world!")


if (window.ethereum) {
	println("We have window.ethereum :-)")

	window.ethereum.request({ method: 'eth_requestAccounts' })
		.then(accounts => {

			println("accounts:")
			println(JSON.stringify(accounts))

//@TODO: Should handle more than one account
			const account = accounts[0]

			window.ethereum.request({
				method: 'eth_signTypedData_v4',
				params: [
					"REPLACE_ME_CHALLENGE",
					account
				]
			})
				.then(accounts => {

					println("accounts:")
					println(JSON.stringify(accounts))
				})
				.catch(error => {

					println("error:")
					println(JSON.stringify(error))
				});


		})
		.catch(error => {

			println("error:")
			println(JSON.stringify(error))
		});
} else {
	println("No window.ethereum :-(")
}

// -->
</script>


</body>
</html>
